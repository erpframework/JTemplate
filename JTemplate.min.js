var $JT=new function(){var D=null;function r(){for(var a=k;a<=k;)e()}function w(){var a=x();return a+=l()}function h(){var a=s();return t&&t.a==a.a&&t.b==a.b?!0:"#"==c?(e(),">"!=c&&m('Unknow end of line "'+c+'"'),t=s(),!0):!1}function i(a){try{var b=a.replace(/\$([a-zA-Z_]+[a-zA-Z_])*?/g,"D.$1");return eval(b)}catch(c){m('Unexpected code "'+a+'"')}}function y(a){switch(a){case "if":var b;a:{var g=b="",a=!1,d=0;do switch(d){case 0:b+=c;if(0!=j)continue;a=!a&&i(b);b="";case 1:for(;!h();)e();a?g+=l():r();d=
2;break;case 2:if(" "==c)break;if(h()){b=g;break a}"{"==c?"else"==b&&(a=!a,d=1):"("==c?"elseif"==b?(b=c,d=0):a?(g+=y(b),g+=l()):(r(),b=""):"{"!=c&&(b+=c)}while(e());b=void 0}return b;case "for":a:{var d=a="",f=0;do switch(f){case 0:a+=c;if(0!=j)continue;(b=a.match(/\((.*?);(.*?);(.*?)\)/))||m('Unexpected code "'+a+'"');for(i(b[1]);!h();)e();if(!i(b[2])){for(r();!h();)e();b="";break a}g=s();d+=l();f=1;break;case 1:if(" "==c)continue;if(h()){i(b[3]);if(!i(b[2])){b=d;break a}z(g);d+=l()}else"}"!=c&&
(d+=w())}while(e());b=void 0}return b;case "while":a:{g=b="";a=!1;d=0;do switch(d){case 0:g+=c;if(0!=j)break;for(;!h();)e();if(!i(g)){for(r();!h();)e();b="";break a}a=s();d=1;case 1:if(" "==c)continue;if(h()){if(!i(g))break a;z(a);b+=l()}else"}"!=c&&(b+=w())}while(e());b=void 0}return b;case "echo":b="";do{if(h())break;b+=c}while(e());return i(b);case "eval":b="";do{if(h())break;b+=c}while(e());i(b);return"";default:m('Undefine key word :"'+a+'".')}}function m(a){throw"JTemplate Code Error in Template["+
v+"] line "+p+" char "+n+": "+a+".";}function s(){return{g:p,e:c,a:o,f:n,d:j,c:k,b:v}}function z(a){p=a.g;c=a.e;o=a.a;n=a.f;j=a.d;k=a.c}function e(){if(o<A){var a=c;c=u.substr(o,1);0==f?f=1:1==f&&"<"==a&&"#"==c?f=2:2==f?f=3:3==f&&"#"==c?f=4:4==f&&">"==a&&(f=1);"\n"==c?(p++,n=0):"("==c?j++:")"==c?j--:"{"==c?k++:"}"==c&&k--;o++;n++;0>k&&m("Code Block Nested Error");0>j&&m("Code Condition Nested Error");return!0}c="";return!1}function l(){4==f&&e();var a="",b="";do{if("<"==b&&"#"==c)return a;a+=b;b=
c}while(e());return a+b}function x(){var a="";do if(!(""==a&&" "==c)){if("("==c||"{"==c||" "==c)return y(a);a+=c}while(e());throw'JTemplate code should be end with "#>".';}var q=!1,v=0,u="",o=0,c="",A=0,p=0,n=0,j=0,k=0,f=0,t=null;return function(a,b){D=b;if(!q){var b=document.getElementsByTagName("html")[0].innerHTML,c=RegExp("<\!--\\[([\\w]*?)\\[([^\b]*?)\\]\\]--\>","g"),d=null;for(q=[];d=c.exec(b);)if(0!=d[1].length){if(q[d[1]])throw"There are more than one templates named by "+d[1];q[d[1]]=d[2]}}v=a;
u=q[a];if(!u)throw"JTemplate cannot found Template named by "+a;o=0;A=u.length;f=n=p=0;for(a="";e();)switch(f){case 1:a+=l();break;case 3:a+=x()}return a}};
